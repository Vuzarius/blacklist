<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blacklist System</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #0a0a0f;
    --surface: #111118;
    --border: #1e1e2e;
    --server-accent: #ff3c5f;
    --staff-accent: #ff8c00;
    --server-glow: rgba(255,60,95,0.15);
    --staff-glow: rgba(255,140,0,0.15);
    --text: #e8e8f0;
    --muted: #6b6b85;
    --input-bg: #0d0d14;
    --green: #50dc78;
  }

  body {
    background: var(--bg);
    font-family: 'Space Mono', monospace;
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }

  body::before {
    content: '';
    position: fixed; inset: 0;
    background-image:
      linear-gradient(rgba(255,60,95,0.025) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255,60,95,0.025) 1px, transparent 1px);
    background-size: 40px 40px;
    animation: gridScroll 25s linear infinite;
    pointer-events: none; z-index: 0;
  }

  @keyframes gridScroll {
    from { background-position: 0 0; }
    to   { background-position: 40px 40px; }
  }

  .hidden { display: none !important; }

  /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     LOGIN SCREEN
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
  .login-screen {
    position: fixed; inset: 0; z-index: 500;
    display: flex; align-items: center; justify-content: center; padding: 20px;
    background: var(--bg);
  }

  .login-box {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 20px; padding: 40px 36px;
    width: 100%; max-width: 400px; text-align: center;
    animation: fadeUp 0.4s ease both;
    position: relative; z-index: 1;
  }

  .login-icon {
    width: 68px; height: 68px;
    background: linear-gradient(135deg, var(--server-accent), var(--staff-accent));
    border-radius: 18px; display: flex; align-items: center; justify-content: center;
    font-size: 32px; margin: 0 auto 20px;
    box-shadow: 0 0 48px rgba(255,60,95,0.35);
  }

  .login-title {
    font-family: 'Syne', sans-serif; font-weight: 800; font-size: 22px;
    background: linear-gradient(90deg, var(--server-accent), var(--staff-accent));
    -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
    margin-bottom: 4px;
  }

  .login-sub { color: var(--muted); font-size: 11px; margin-bottom: 28px; letter-spacing: 0.04em; }

  .login-tabs {
    display: flex; gap: 6px; margin-bottom: 22px;
    background: rgba(255,255,255,0.03); border: 1px solid var(--border);
    border-radius: 10px; padding: 4px;
  }

  .login-tab {
    flex: 1; padding: 9px; border: none; background: none;
    color: var(--muted); font-family: 'Syne', sans-serif;
    font-weight: 700; font-size: 11px; letter-spacing: 0.06em;
    text-transform: uppercase; cursor: pointer; border-radius: 7px; transition: all 0.15s;
  }
  .login-tab.active { background: rgba(255,60,95,0.15); color: var(--server-accent); }

  .pw-wrap { position: relative; margin-bottom: 12px; }
  .pw-wrap input {
    width: 100%; background: var(--input-bg); border: 1px solid var(--border);
    color: var(--text); border-radius: 10px; padding: 13px 46px 13px 16px;
    font-family: 'Space Mono', monospace; font-size: 13px; outline: none;
    letter-spacing: 0.12em; transition: border-color 0.15s, box-shadow 0.15s;
  }
  .pw-wrap input:focus { border-color: var(--server-accent); box-shadow: 0 0 0 3px rgba(255,60,95,0.1); }
  .eye-btn {
    position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
    background: none; border: none; cursor: pointer; color: var(--muted); font-size: 16px; padding: 2px;
    transition: color 0.15s;
  }
  .eye-btn:hover { color: var(--text); }

  .login-error { color: var(--server-accent); font-size: 11px; margin-bottom: 12px; min-height: 14px; display: none; }
  .login-error.show { display: block; }

  .btn-primary {
    width: 100%; background: linear-gradient(135deg, var(--server-accent), #c4003f);
    color: #fff; border: none; padding: 13px; border-radius: 12px;
    font-family: 'Syne', sans-serif; font-weight: 700; font-size: 14px;
    cursor: pointer; letter-spacing: 0.05em; transition: transform 0.15s, box-shadow 0.15s;
    box-shadow: 0 4px 20px rgba(255,60,95,0.3);
  }
  .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 28px rgba(255,60,95,0.45); }

  .guest-note { color: var(--muted); font-size: 12px; line-height: 1.7; margin-bottom: 20px; }
  .guest-note strong { color: var(--text); }

  /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     MAIN PAGE
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
  .page {
    position: relative; z-index: 1;
    max-width: 860px; margin: 0 auto; padding: 48px 24px 80px;
  }

  /* Header */
  .header {
    display: flex; align-items: center; justify-content: space-between;
    margin-bottom: 40px; animation: fadeDown 0.5s ease both;
    flex-wrap: wrap; gap: 14px;
  }
  .header-left { display: flex; align-items: center; gap: 16px; }
  .header-icon {
    width: 54px; height: 54px;
    background: linear-gradient(135deg, var(--server-accent), var(--staff-accent));
    border-radius: 14px; display: flex; align-items: center; justify-content: center;
    font-size: 26px; box-shadow: 0 0 32px rgba(255,60,95,0.35); flex-shrink: 0;
  }
  .header-title {
    font-family: 'Syne', sans-serif; font-weight: 800; font-size: 24px;
    background: linear-gradient(90deg, var(--server-accent), var(--staff-accent));
    -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  }
  .header-sub { color: var(--muted); font-size: 11px; margin-top: 2px; letter-spacing: 0.05em; }

  .header-right { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }

  .admin-badge {
    display: flex; align-items: center; gap: 6px;
    background: rgba(80,220,120,0.1); border: 1px solid rgba(80,220,120,0.3);
    color: var(--green); padding: 7px 14px; border-radius: 20px;
    font-family: 'Syne', sans-serif; font-weight: 700; font-size: 11px; letter-spacing: 0.08em;
  }
  .admin-dot {
    width: 7px; height: 7px; border-radius: 50%;
    background: var(--green); box-shadow: 0 0 6px var(--green);
    animation: blink 2s infinite;
  }
  @keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.3} }

  .btn-add {
    display: flex; align-items: center; gap: 8px;
    background: linear-gradient(135deg, var(--server-accent), #c4003f);
    color: #fff; border: none; padding: 11px 18px; border-radius: 12px;
    font-family: 'Syne', sans-serif; font-weight: 700; font-size: 13px;
    cursor: pointer; letter-spacing: 0.04em;
    transition: transform 0.15s, box-shadow 0.15s;
    box-shadow: 0 4px 20px rgba(255,60,95,0.3); white-space: nowrap;
  }
  .btn-add:hover { transform: translateY(-2px); box-shadow: 0 8px 28px rgba(255,60,95,0.45); }

  .btn-logout {
    background: rgba(255,255,255,0.05); border: 1px solid var(--border);
    color: var(--muted); padding: 10px 14px; border-radius: 10px;
    font-family: 'Space Mono', monospace; font-size: 11px;
    cursor: pointer; transition: all 0.15s; white-space: nowrap;
  }
  .btn-logout:hover { color: var(--text); border-color: var(--muted); }

  /* Stats */
  .stats {
    display: flex; gap: 12px; margin-bottom: 36px;
    animation: fadeUp 0.5s 0.1s ease both;
  }
  .stat {
    flex: 1; background: var(--surface); border: 1px solid var(--border);
    border-radius: 12px; padding: 14px 18px; display: flex; align-items: center; gap: 12px;
  }
  .stat-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
  .stat-dot.server { background: var(--server-accent); box-shadow: 0 0 8px var(--server-accent); }
  .stat-dot.staff  { background: var(--staff-accent);  box-shadow: 0 0 8px var(--staff-accent); }
  .stat-dot.total  { background: linear-gradient(135deg, var(--server-accent), var(--staff-accent)); }
  .stat-label { color: var(--muted); font-size: 10px; letter-spacing: 0.06em; }
  .stat-count { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 22px; }

  /* Filter */
  .filter-bar { display: flex; gap: 8px; margin-bottom: 28px; animation: fadeUp 0.5s 0.15s ease both; }
  .filter-btn {
    padding: 8px 16px; border-radius: 20px; border: 1px solid var(--border);
    background: var(--surface); color: var(--muted);
    font-family: 'Space Mono', monospace; font-size: 11px; cursor: pointer;
    letter-spacing: 0.06em; transition: all 0.15s;
  }
  .filter-btn.active-all    { border-color: var(--text); color: var(--text); }
  .filter-btn.active-server { border-color: var(--server-accent); color: var(--server-accent); background: rgba(255,60,95,0.08); }
  .filter-btn.active-staff  { border-color: var(--staff-accent); color: var(--staff-accent); background: rgba(255,140,0,0.08); }

  /* Section label */
  .section-label { display: flex; align-items: center; gap: 12px; margin: 28px 0 14px; }
  .section-label span { font-size: 10px; text-transform: uppercase; letter-spacing: 0.12em; color: var(--muted); white-space: nowrap; }
  .section-label::after { content: ''; flex: 1; height: 1px; background: var(--border); }

  /* Cards */
  .cards-list { display: flex; flex-direction: column; gap: 14px; }

  .card {
    background: var(--surface); border-radius: 16px; border: 1px solid var(--border);
    overflow: hidden; position: relative; transition: transform 0.2s, box-shadow 0.2s;
    animation: cardIn 0.35s ease both;
  }
  @keyframes cardIn { from{opacity:0;transform:translateY(12px)} to{opacity:1;transform:translateY(0)} }

  .card:hover { transform: translateY(-2px); }
  .card.server-bl { border-color: rgba(255,60,95,0.3); box-shadow: 0 4px 24px var(--server-glow); }
  .card.server-bl:hover { box-shadow: 0 8px 40px rgba(255,60,95,0.25); }
  .card.staff-bl  { border-color: rgba(255,140,0,0.3); box-shadow: 0 4px 24px var(--staff-glow); }
  .card.staff-bl:hover  { box-shadow: 0 8px 40px rgba(255,140,0,0.25); }

  .card::before { content: ''; position: absolute; left:0;top:0;bottom:0;width:3px; }
  .card.server-bl::before { background: var(--server-accent); }
  .card.staff-bl::before  { background: var(--staff-accent); }

  .card-body {
    padding: 18px 20px 18px 26px;
    display: grid; grid-template-columns: auto 1fr auto;
    gap: 0 18px; align-items: center;
  }

  .avatar {
    width: 50px; height: 50px; border-radius: 50%;
    background: linear-gradient(135deg, #2a2a3a, #1a1a28);
    display: flex; align-items: center; justify-content: center;
    font-size: 20px; border: 2px solid var(--border); flex-shrink: 0;
    position: relative; font-family: 'Syne', sans-serif; font-weight: 700; overflow: hidden;
  }
  .avatar img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }
  .avatar-badge {
    position: absolute; bottom: -2px; right: -2px;
    width: 16px; height: 16px; border-radius: 50%;
    border: 2px solid var(--surface); font-size: 8px;
    display: flex; align-items: center; justify-content: center;
  }
  .card.server-bl .avatar-badge { background: var(--server-accent); }
  .card.staff-bl  .avatar-badge { background: var(--staff-accent); }

  .info { min-width: 0; }
  .info-name { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 15px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-bottom: 2px; }
  .info-username { color: var(--muted); font-size: 11px; margin-bottom: 7px; }
  .info-username .disc { color: #4a9eff; }
  .tags { display: flex; flex-wrap: wrap; gap: 5px; }
  .tag { font-size: 10px; padding: 3px 8px; border-radius: 20px; background: rgba(255,255,255,0.04); border: 1px solid var(--border); color: var(--muted); white-space: nowrap; }
  .tag.id-tag { color: #4a4a65; }

  .card-right { display: flex; flex-direction: column; align-items: flex-end; gap: 8px; flex-shrink: 0; }
  .bl-badge {
    font-family: 'Syne', sans-serif; font-weight: 700; font-size: 10px;
    letter-spacing: 0.1em; text-transform: uppercase; padding: 5px 12px; border-radius: 20px; white-space: nowrap;
  }
  .card.server-bl .bl-badge { background: rgba(255,60,95,0.13); color: var(--server-accent); border: 1px solid rgba(255,60,95,0.3); }
  .card.staff-bl  .bl-badge { background: rgba(255,140,0,0.10); color: var(--staff-accent);  border: 1px solid rgba(255,140,0,0.3); }
  .card-date { color: var(--muted); font-size: 10px; }

  /* Delete button */
  .btn-delete {
    display: flex; align-items: center; gap: 5px;
    background: rgba(255,60,95,0.08); border: 1px solid rgba(255,60,95,0.25);
    color: var(--server-accent); padding: 7px 12px; border-radius: 8px;
    font-family: 'Syne', sans-serif; font-weight: 700; font-size: 10px;
    letter-spacing: 0.06em; cursor: pointer; transition: all 0.15s; white-space: nowrap;
  }
  .btn-delete:hover { background: rgba(255,60,95,0.2); box-shadow: 0 0 12px rgba(255,60,95,0.2); }

  .card-footer { margin: 0 26px 16px; padding: 10px 14px; background: rgba(255,255,255,0.025); border-radius: 10px; border: 1px solid var(--border); }
  .card-footer-label { font-size: 9px; color: var(--muted); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 3px; }
  .card-footer-text  { font-size: 12px; color: var(--text); opacity: 0.75; line-height: 1.5; }

  /* Empty */
  .empty { text-align: center; padding: 80px 20px; color: var(--muted); display: none; }
  .empty-icon { font-size: 48px; margin-bottom: 16px; opacity: 0.4; }
  .empty p { font-size: 13px; }

  /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     MODALS
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
  .overlay {
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.75); backdrop-filter: blur(6px);
    z-index: 100; display: flex; align-items: center; justify-content: center; padding: 20px;
    opacity: 0; pointer-events: none; transition: opacity 0.2s;
  }
  .overlay.open { opacity: 1; pointer-events: all; }

  .modal {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 20px; padding: 32px; width: 100%; max-width: 520px;
    transform: translateY(20px) scale(0.97); transition: transform 0.25s ease;
    max-height: 90vh; overflow-y: auto;
  }
  .overlay.open .modal { transform: none; }

  .modal-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 28px; }
  .modal-title { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 18px; background: linear-gradient(90deg, var(--server-accent), var(--staff-accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
  .btn-close { background: rgba(255,255,255,0.06); border: 1px solid var(--border); color: var(--muted); width: 32px; height: 32px; border-radius: 8px; cursor: pointer; font-size: 16px; display: flex; align-items: center; justify-content: center; transition: all 0.15s; }
  .btn-close:hover { color: var(--text); background: rgba(255,255,255,0.1); }

  .form-grid { display: flex; flex-direction: column; gap: 16px; }
  .form-row  { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
  .field { display: flex; flex-direction: column; gap: 6px; }
  label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.1em; color: var(--muted); }
  input, textarea {
    background: var(--input-bg); border: 1px solid var(--border); color: var(--text);
    border-radius: 10px; padding: 11px 14px;
    font-family: 'Space Mono', monospace; font-size: 12px;
    outline: none; transition: border-color 0.15s, box-shadow 0.15s; width: 100%;
  }
  input:focus, textarea:focus { border-color: var(--server-accent); box-shadow: 0 0 0 3px rgba(255,60,95,0.1); }
  textarea { resize: vertical; min-height: 80px; }

  .type-row { display: flex; gap: 8px; }
  .type-item { flex: 1; }
  .type-item input[type=radio] { display: none; }
  .type-item label {
    display: flex; align-items: center; justify-content: center; gap: 6px;
    padding: 11px; border: 1px solid var(--border); border-radius: 10px; cursor: pointer;
    font-family: 'Syne', sans-serif; font-weight: 700; font-size: 11px; color: var(--muted);
    transition: all 0.15s; text-transform: uppercase; letter-spacing: 0.06em; width: 100%;
  }
  .type-item input[type=radio]:checked + label.server-lbl { color: var(--server-accent); border-color: var(--server-accent); background: rgba(255,60,95,0.1); }
  .type-item input[type=radio]:checked + label.staff-lbl  { color: var(--staff-accent);  border-color: var(--staff-accent);  background: rgba(255,140,0,0.1); }

  .btn-submit { width: 100%; background: linear-gradient(135deg, var(--server-accent), #c4003f); color: #fff; border: none; padding: 14px; border-radius: 12px; font-family: 'Syne', sans-serif; font-weight: 700; font-size: 14px; cursor: pointer; letter-spacing: 0.05em; transition: transform 0.15s, box-shadow 0.15s; box-shadow: 0 4px 20px rgba(255,60,95,0.3); margin-top: 4px; }
  .btn-submit:hover { transform: translateY(-2px); box-shadow: 0 8px 28px rgba(255,60,95,0.45); }

  /* Confirm delete modal */
  .confirm-modal { max-width: 400px; text-align: center; }
  .confirm-icon  { font-size: 48px; margin-bottom: 16px; }
  .confirm-title { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 20px; color: var(--server-accent); margin-bottom: 10px; }
  .confirm-text  { color: var(--muted); font-size: 12px; line-height: 1.7; margin-bottom: 24px; }
  .confirm-name  { color: var(--text); font-weight: 700; }
  .confirm-btns  { display: flex; gap: 10px; }
  .btn-cancel    { flex: 1; background: rgba(255,255,255,0.05); border: 1px solid var(--border); color: var(--muted); padding: 12px; border-radius: 10px; font-family: 'Space Mono', monospace; font-size: 12px; cursor: pointer; transition: all 0.15s; }
  .btn-cancel:hover { border-color: var(--muted); color: var(--text); }
  .btn-confirm-del { flex: 1; background: linear-gradient(135deg, var(--server-accent), #c4003f); color: #fff; border: none; padding: 12px; border-radius: 10px; font-family: 'Syne', sans-serif; font-weight: 700; font-size: 13px; cursor: pointer; transition: transform 0.15s; }
  .btn-confirm-del:hover { transform: translateY(-1px); }

  /* Toast */
  .toast {
    position: fixed; bottom: 28px; right: 28px;
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 12px; padding: 14px 20px; font-size: 13px; z-index: 600;
    transform: translateY(60px); opacity: 0; transition: all 0.3s ease;
    box-shadow: 0 8px 32px rgba(0,0,0,0.5);
  }
  .toast.show   { transform: translateY(0); opacity: 1; }
  .toast.ok  { border-color: rgba(80,220,120,0.4); color: var(--green); }
  .toast.err { border-color: rgba(255,60,95,0.4);  color: var(--server-accent); }

  @keyframes fadeDown { from{opacity:0;transform:translateY(-20px)} to{opacity:1;transform:translateY(0)} }
  @keyframes fadeUp   { from{opacity:0;transform:translateY(16px)}  to{opacity:1;transform:translateY(0)} }

  @media (max-width: 600px) {
    .header { flex-direction: column; align-items: flex-start; }
    .btn-add { width: 100%; justify-content: center; }
    .stats { flex-wrap: wrap; }
    .card-body { grid-template-columns: auto 1fr; }
    .card-right { display: none; }
    .form-row { grid-template-columns: 1fr; }
    .type-row { flex-direction: column; }
  }
</style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LOGIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="login-screen" id="login-screen">
  <div style="position:relative;z-index:1;width:100%;max-width:400px">
    <div class="login-box">
      <div class="login-icon">üö´</div>
      <div class="login-title">BLACKLIST SYSTEM</div>
      <div class="login-sub">–í—ã–±–µ—Ä–∏ —Ä–µ–∂–∏–º –≤—Ö–æ–¥–∞</div>

      <div class="login-tabs">
        <button class="login-tab active" id="tab-admin" onclick="switchTab('admin')">üõ° –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</button>
        <button class="login-tab"        id="tab-guest" onclick="switchTab('guest')">üëÅ –ì–æ—Å—Ç—å</button>
      </div>

      <div id="admin-form">
        <div class="pw-wrap">
          <input type="password" id="pw-input" placeholder="–í–≤–µ–¥–∏ –ø–∞—Ä–æ–ª—å..." onkeydown="if(event.key==='Enter')doLogin()">
          <button class="eye-btn" onclick="togglePw()" id="eye-btn">üëÅ</button>
        </div>
        <div class="login-error" id="login-error">‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.</div>
        <button class="btn-primary" onclick="doLogin()">–í–æ–π—Ç–∏ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</button>
      </div>

      <div id="guest-form" class="hidden">
        <p class="guest-note">–ì–æ—Å—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º: –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ <strong>–ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å</strong> —á—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫.<br>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ.</p>
        <button class="btn-primary" onclick="enterApp(false)">–í–æ–π—Ç–∏ –∫–∞–∫ –≥–æ—Å—Ç—å</button>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="page hidden" id="main-page">

  <div class="header">
    <div class="header-left">
      <div class="header-icon">üö´</div>
      <div>
        <div class="header-title">BLACKLIST SYSTEM</div>
        <div class="header-sub" id="last-updated">‚Äî</div>
      </div>
    </div>
    <div class="header-right">
      <div class="admin-badge hidden" id="admin-badge"><div class="admin-dot"></div>ADMIN</div>
      <button class="btn-add hidden" id="btn-add" onclick="openModal('add-overlay')">+ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å</button>
      <button class="btn-logout" onclick="doLogout()">–í—ã–π—Ç–∏</button>
    </div>
  </div>

  <div class="stats">
    <div class="stat"><div class="stat-dot server"></div><div><div class="stat-label">BLACKLIST –°–ï–†–í–ï–†–ê</div><div class="stat-count" id="count-server">0</div></div></div>
    <div class="stat"><div class="stat-dot staff"></div><div><div class="stat-label">BLACKLIST –ü–ï–†–°–û–ù–ê–õ–ê</div><div class="stat-count" id="count-staff">0</div></div></div>
    <div class="stat"><div class="stat-dot total"></div><div><div class="stat-label">–í–°–ï–ì–û –ó–ê–ü–ò–°–ï–ô</div><div class="stat-count" id="count-total">0</div></div></div>
  </div>

  <div class="filter-bar">
    <button class="filter-btn active-all" data-filter="all"    onclick="setFilter('all')">–í–°–ï</button>
    <button class="filter-btn"            data-filter="server" onclick="setFilter('server')">‚õî –°–ï–†–í–ï–†</button>
    <button class="filter-btn"            data-filter="staff"  onclick="setFilter('staff')">üîí –ü–ï–†–°–û–ù–ê–õ</button>
  </div>

  <div id="bl-list"></div>
  <div class="empty" id="empty-state"><div class="empty-icon">üì≠</div><p>–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç</p></div>

</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ADD MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="overlay" id="add-overlay" onclick="bgClose(event,'add-overlay')">
  <div class="modal">
    <div class="modal-header">
      <div class="modal-title">–ù–û–í–ê–Ø –ó–ê–ü–ò–°–¨</div>
      <button class="btn-close" onclick="closeModal('add-overlay')">‚úï</button>
    </div>
    <div class="form-grid">
      <div class="field">
        <label>–¢–∏–ø —á—ë—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞</label>
        <div class="type-row">
          <div class="type-item"><input type="radio" name="bl-type" id="type-server" value="server" checked><label for="type-server" class="server-lbl">‚õî Blacklist –°–µ—Ä–≤–µ—Ä–∞</label></div>
          <div class="type-item"><input type="radio" name="bl-type" id="type-staff"  value="staff"><label for="type-staff" class="staff-lbl">üîí Blacklist –ü–µ—Ä—Å–æ–Ω–∞–ª–∞</label></div>
        </div>
      </div>
      <div class="form-row">
        <div class="field"><label>–ù–∏–∫ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è)</label><input type="text" id="f-nick" placeholder="–ê—Ä—Ç—ë–º –†—ã–∫–æ–≤"></div>
        <div class="field"><label>Discord —é–∑–µ—Ä–Ω–µ–π–º</label><input type="text" id="f-username" placeholder="artyom_rykov"></div>
      </div>
      <div class="field">
        <label>Discord ID ‚Äî –≤–≤–µ–¥–∏ –∏ –Ω–∞–∂–º–∏ ¬´–ó–∞–≥—Ä—É–∑–∏—Ç—å¬ª</label>
        <div style="display:flex;gap:8px">
          <input type="text" id="f-id" placeholder="389201847362" maxlength="20" style="flex:1">
          <button type="button" onclick="fetchDiscord()" id="fetch-btn" style="background:rgba(74,158,255,0.12);border:1px solid rgba(74,158,255,0.35);color:#4a9eff;padding:0 16px;border-radius:10px;font-family:Syne,sans-serif;font-weight:700;font-size:11px;cursor:pointer;white-space:nowrap;letter-spacing:0.05em">‚¨á –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
        </div>
        <div id="fetch-status" style="font-size:10px;margin-top:4px;min-height:14px"></div>
      </div>
      <div class="field" id="avatar-row">
        <label>–ê–≤–∞—Ç–∞—Ä</label>
        <div style="display:flex;align-items:center;gap:10px">
          <img id="avatar-preview" src="" style="width:42px;height:42px;border-radius:50%;border:2px solid var(--border);object-fit:cover;display:none">
          <input type="text" id="f-avatar" placeholder="–ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–ª–∏ –≤—Å—Ç–∞–≤—å —Å—Å—ã–ª–∫—É" style="flex:1">
        </div>
      </div>
      <div class="field"><label>–¢–µ–≥–∏ / –ø—Ä–∏—á–∏–Ω—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label><input type="text" id="f-tags" placeholder="–§–ª—É–¥, –¢–æ–∫—Å–∏—á–Ω–æ—Å—Ç—å"></div>
      <div class="field"><label>–ü–æ–¥—Ä–æ–±–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞</label><textarea id="f-reason" placeholder="–û–ø–∏—à–∏ –ø–æ–¥—Ä–æ–±–Ω–æ..."></textarea></div>
      <button class="btn-submit" onclick="addEntry()">–î–æ–±–∞–≤–∏—Ç—å –≤ —á—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê DELETE CONFIRM MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="overlay" id="del-overlay" onclick="bgClose(event,'del-overlay')">
  <div class="modal confirm-modal">
    <div class="confirm-icon">üóëÔ∏è</div>
    <div class="confirm-title">–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å?</div>
    <div class="confirm-text">–¢—ã —É–¥–∞–ª—è–µ—à—å –∏–∑ —á—ë—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞:<br><span class="confirm-name" id="del-name">‚Äî</span><br><br>–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.</div>
    <div class="confirm-btns">
      <button class="btn-cancel" onclick="closeModal('del-overlay')">–û—Ç–º–µ–Ω–∞</button>
      <button class="btn-confirm-del" onclick="confirmDelete()">–£–¥–∞–ª–∏—Ç—å</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
// –ü–∞—Ä–æ–ª—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω SHA-256 (–Ω–µ–ª—å–∑—è –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏–∑ –∫–æ–¥–∞)
const ADMIN_HASH = '35fa8142ae173ae39b4abd11c9385f4d9535a321df62bc4040ac89e4758acadb';

const KEY = 'bl_v3';
let isAdmin = false;
let currentFilter = 'all';
let pendingUid = null;

// ‚îÄ‚îÄ DISCORD FETCH ‚îÄ‚îÄ
async function fetchDiscord() {
  const id = document.getElementById('f-id').value.trim();
  if (!id || !/^\d{15,20}$/.test(id)) {
    setFetchStatus('–í–≤–µ–¥–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π Discord ID (15-20 —Ü–∏—Ñ—Ä)', 'var(--server-accent)');
    return;
  }
  const btn = document.getElementById('fetch-btn');
  btn.textContent = '‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...';
  btn.disabled = true;
  setFetchStatus('–ó–∞–ø—Ä–∞—à–∏–≤–∞—é –¥–∞–Ω–Ω—ã–µ...', 'var(--muted)');
  try {
    const res = await fetch(`https://api.lanyard.rest/v1/users/${id}`);
    const data = await res.json();
    if (data.success && data.data && data.data.discord_user) {
      const u = data.data.discord_user;
      const avatar = u.avatar
        ? `https://cdn.discordapp.com/avatars/${u.id}/${u.avatar}.png?size=256`
        : `https://cdn.discordapp.com/embed/avatars/${parseInt(u.discriminator||0) % 5}.png`;
      document.getElementById('f-username').value = u.username || '';
      document.getElementById('f-nick').value = u.global_name || u.username || '';
      document.getElementById('f-avatar').value = avatar;
      const img = document.getElementById('avatar-preview');
      img.src = avatar; img.style.display = 'block';
      setFetchStatus('‚úì –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!', 'var(--green)');
    } else {
      // fallback: try default avatar by modulo
      const avatarUrl = `https://cdn.discordapp.com/embed/avatars/${Number(BigInt(id) % 6n)}.png`;
      document.getElementById('f-avatar').value = avatarUrl;
      const img = document.getElementById('avatar-preview');
      img.src = avatarUrl; img.style.display = 'block';
      setFetchStatus('–Æ–∑–µ—Ä–Ω–µ–π–º –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî –∑–∞–ø–æ–ª–Ω–∏ –≤—Ä—É—á–Ω—É—é. –ê–≤–∞—Ç–∞—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.', 'var(--staff-accent)');
    }
  } catch(e) {
    setFetchStatus('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏. –ó–∞–ø–æ–ª–Ω–∏ –≤—Ä—É—á–Ω—É—é.', 'var(--server-accent)');
  }
  btn.textContent = '‚¨á –ó–∞–≥—Ä—É–∑–∏—Ç—å';
  btn.disabled = false;
}

function setFetchStatus(msg, color) {
  const el = document.getElementById('fetch-status');
  el.textContent = msg; el.style.color = color;
}

// ‚îÄ‚îÄ AUTH ‚îÄ‚îÄ
function switchTab(tab) {
  document.getElementById('tab-admin').classList.toggle('active', tab === 'admin');
  document.getElementById('tab-guest').classList.toggle('active', tab === 'guest');
  document.getElementById('admin-form').classList.toggle('hidden', tab !== 'admin');
  document.getElementById('guest-form').classList.toggle('hidden', tab !== 'guest');
  document.getElementById('login-error').classList.remove('show');
}

function togglePw() {
  const i = document.getElementById('pw-input');
  i.type = i.type === 'password' ? 'text' : 'password';
  document.getElementById('eye-btn').textContent = i.type === 'password' ? 'üëÅ' : 'üôà';
}

async function hashStr(str) {
  const buf = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(str));
  return Array.from(new Uint8Array(buf)).map(b => b.toString(16).padStart(2,'0')).join('');
}

async function doLogin() {
  const input = document.getElementById('pw-input').value;
  const hash = await hashStr(input);
  if (hash === ADMIN_HASH) {
    enterApp(true);
  } else {
    document.getElementById('login-error').classList.add('show');
    document.getElementById('pw-input').value = '';
    document.getElementById('pw-input').focus();
  }
}

function enterApp(admin) {
  isAdmin = admin;
  document.getElementById('login-screen').style.display = 'none';
  document.getElementById('main-page').classList.remove('hidden');
  if (isAdmin) {
    document.getElementById('admin-badge').classList.remove('hidden');
    document.getElementById('btn-add').classList.remove('hidden');
  } else {
    document.getElementById('admin-badge').classList.add('hidden');
    document.getElementById('btn-add').classList.add('hidden');
  }
  render();
}

function doLogout() {
  isAdmin = false;
  document.getElementById('login-screen').style.display = '';
  document.getElementById('main-page').classList.add('hidden');
  document.getElementById('pw-input').value = '';
  document.getElementById('login-error').classList.remove('show');
  switchTab('admin');
}

// ‚îÄ‚îÄ DATA ‚îÄ‚îÄ
function load() { try { return JSON.parse(localStorage.getItem(KEY)) || []; } catch { return []; } }
function save(d) { localStorage.setItem(KEY, JSON.stringify(d)); }

// ‚îÄ‚îÄ RENDER ‚îÄ‚îÄ
function render() {
  const data = load();
  const filtered = currentFilter === 'all' ? data : data.filter(e => e.type === currentFilter);

  document.getElementById('count-server').textContent = data.filter(e => e.type === 'server').length;
  document.getElementById('count-staff').textContent  = data.filter(e => e.type === 'staff').length;
  document.getElementById('count-total').textContent  = data.length;

  const container = document.getElementById('bl-list');
  container.innerHTML = '';

  const empty = document.getElementById('empty-state');
  if (filtered.length === 0) { empty.style.display = 'block'; return; }
  empty.style.display = 'none';

  const sl = filtered.filter(e => e.type === 'server');
  const tl = filtered.filter(e => e.type === 'staff');

  if (sl.length) { container.innerHTML += `<div class="section-label"><span>‚õî &nbsp;Blacklist –°–µ—Ä–≤–µ—Ä–∞</span></div><div class="cards-list" id="ls"></div>`; }
  if (tl.length) { container.innerHTML += `<div class="section-label"><span>üîí &nbsp;Blacklist –ü–µ—Ä—Å–æ–Ω–∞–ª–∞</span></div><div class="cards-list" id="lt"></div>`; }

  sl.forEach(e => document.getElementById('ls').innerHTML += card(e));
  tl.forEach(e => document.getElementById('lt').innerHTML += card(e));

  if (data.length) {
    const lat = data.reduce((a,b) => a.date > b.date ? a : b);
    document.getElementById('last-updated').textContent = '–û–ë–ù–û–í–õ–ï–ù–û ¬∑ ' + fmtDate(lat.date);
  }
}

function card(e) {
  const cls    = e.type === 'server' ? 'server-bl' : 'staff-bl';
  const ico    = e.type === 'server' ? '‚õî' : 'üîí';
  const label  = e.type === 'server' ? '‚õî Server BL' : 'üîí Staff BL';
  const init   = (e.nick || e.username || '?')[0].toUpperCase();
  const av     = e.avatar ? `<img src="${x(e.avatar)}" alt="" onerror="this.remove()">` : init;
  const tags   = (e.tags||'').split(',').map(t=>t.trim()).filter(Boolean).map(t=>`<span class="tag">üè∑ ${x(t)}</span>`).join('');
  const delBtn = isAdmin ? `<button class="btn-delete" onclick="askDelete('${x(e.uid)}','${x(e.nick||e.username)}')">‚úï –£–¥–∞–ª–∏—Ç—å</button>` : '';
  const foot   = e.reason ? `<div class="card-footer"><div class="card-footer-label">–ü—Ä–∏—á–∏–Ω–∞</div><div class="card-footer-text">${x(e.reason)}</div></div>` : '';

  return `<div class="card ${cls}">
    <div class="card-body">
      <div class="avatar">${av}<div class="avatar-badge">${ico}</div></div>
      <div class="info">
        <div class="info-name">${x(e.nick||e.username)}</div>
        <div class="info-username">Discord: <span class="disc">${x(e.username)}</span></div>
        <div class="tags">${e.id?`<span class="tag id-tag"># ${x(e.id)}</span>`:''}${tags}</div>
      </div>
      <div class="card-right">
        <div class="bl-badge">${label}</div>
        <div class="card-date">–¥–æ–±–∞–≤–ª–µ–Ω ${fmtDate(e.date)}</div>
        ${delBtn}
      </div>
    </div>${foot}</div>`;
}

// ‚îÄ‚îÄ DELETE ‚îÄ‚îÄ
function askDelete(uid, name) {
  pendingUid = uid;
  document.getElementById('del-name').textContent = name;
  openModal('del-overlay');
}

function confirmDelete() {
  if (!pendingUid) return;
  save(load().filter(e => e.uid !== pendingUid));
  pendingUid = null;
  closeModal('del-overlay');
  render();
  toast('‚úì –ó–∞–ø–∏—Å—å —É–¥–∞–ª–µ–Ω–∞ –∏–∑ —á—ë—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞', 'ok');
}

// ‚îÄ‚îÄ ADD ‚îÄ‚îÄ
function addEntry() {
  const username = document.getElementById('f-username').value.trim();
  if (!username) { toast('–£–∫–∞–∂–∏ Discord —é–∑–µ—Ä–Ω–µ–π–º!', 'err'); return; }

  const d = load();
  d.unshift({
    uid:      Date.now().toString(36) + Math.random().toString(36).slice(2),
    type:     document.querySelector('input[name="bl-type"]:checked').value,
    nick:     document.getElementById('f-nick').value.trim(),
    username,
    id:       document.getElementById('f-id').value.trim(),
    avatar:   document.getElementById('f-avatar').value.trim(),
    tags:     document.getElementById('f-tags').value.trim(),
    reason:   document.getElementById('f-reason').value.trim(),
    date:     new Date().toISOString()
  });
  save(d);
  closeModal('add-overlay');
  ['f-nick','f-username','f-id','f-avatar','f-tags','f-reason'].forEach(i => document.getElementById(i).value = '');
  const img = document.getElementById('avatar-preview'); if(img){img.src='';img.style.display='none';}
  setFetchStatus('','var(--muted)');
  document.getElementById('type-server').checked = true;
  render();
  toast('‚úì –£—á–∞—Å—Ç–Ω–∏–∫ –¥–æ–±–∞–≤–ª–µ–Ω –≤ —á—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫', 'ok');
}

// ‚îÄ‚îÄ FILTER ‚îÄ‚îÄ
function setFilter(f) {
  currentFilter = f;
  document.querySelectorAll('.filter-btn').forEach(b => {
    b.className = 'filter-btn' + (b.dataset.filter === f ? ` active-${f}` : '');
  });
  render();
}

// ‚îÄ‚îÄ MODALS ‚îÄ‚îÄ
function openModal(id)  { document.getElementById(id).classList.add('open'); }
function closeModal(id) { document.getElementById(id).classList.remove('open'); if(id==='del-overlay') pendingUid=null; }
function bgClose(e,id)  { if (e.target === document.getElementById(id)) closeModal(id); }

// ‚îÄ‚îÄ UTILS ‚îÄ‚îÄ
function x(s) { return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }
function fmtDate(iso) { try { return new Date(iso).toLocaleDateString('ru-RU',{day:'2-digit',month:'2-digit',year:'numeric'}); } catch { return '‚Äî'; } }
function toast(msg, type) {
  const t = document.getElementById('toast');
  t.textContent = msg; t.className = `toast ${type} show`;
  setTimeout(() => { t.className = `toast ${type}`; }, 3200);
}

document.addEventListener('keydown', e => {
  if (e.key === 'Escape') { closeModal('add-overlay'); closeModal('del-overlay'); }
});
</script>
</body>
</html>
